
FILE( GLOB CODERS_SRCS ../coders/*.c )

SET( CODERS_DEPENDENT_LIBRARIES )
IF( NOT IMAGEMAGICK_WITH_DPS )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/dps.c" )
ENDIF()
IF( NOT IMAGEMAGICK_WITH_DJVU )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/djvu.c" )
ENDIF()
IF( NOT IMAGEMAGICK_WITH_OPENEXR )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/exr.c" )
ENDIF()
IF( NOT IMAGEMAGICK_WITH_FLASHPIX )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/fpx.c" )
ENDIF()
IF( NOT IMAGEMAGICK_WITH_JBIG )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/jbig.c" )
ENDIF()
IF( NOT IMAGEMAGICK_WITH_JPEG )
    message("NO JPEG")
	LIST(REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/jpeg.c" )
ELSE()
	find_package(JPEG ${JPEG_VERSION} REQUIRED)
	include_directories(${JPEG_INCLUDE_DIRS})
	set(CODERS_DEPENDENT_LIBRARIES ${CODERS_DEPENDENT_LIBRARIES} ${JPEG_LIBRARIES})
ENDIF()
IF( IMAGEMAGICK_WITH_GDCM )
	SET( CODERS_DEPENDENT_LIBRARIES ${CODERS_DEPENDENT_LIBRARIES} ${GDCM_LIBRARIES} )
ENDIF( IMAGEMAGICK_WITH_GDCM )
IF( NOT IMAGEMAGICK_WITH_JP2 )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/jp2.c" )
ENDIF()
IF( NOT IMAGEMAGICK_WITH_PNG )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/png.c" )
ELSE()
	SET( PNG_NAMES libpng12_static libpng14_static libpng15_static )
	FIND_PACKAGE( PNG REQUIRED )
	SET( CODERS_DEPENDENT_LIBRARIES ${CODERS_DEPENDENT_LIBRARIES} ${PNG_LIBRARIES} )
	INCLUDE_DIRECTORIES( ${PNG_INCLUDE_DIR} )
ENDIF()
IF( NOT IMAGEMAGICK_WITH_TIFF )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/ept.c" "${CMAKE_CURRENT_SOURCE_DIR}/../coders/tiff.c" )
ELSE()
	FIND_PACKAGE( TIFF REQUIRED )
	INCLUDE_DIRECTORIES( ${TIFF_INCLUDE_DIR} )
	SET( CODERS_DEPENDENT_LIBRARIES ${CODERS_DEPENDENT_LIBRARIES} ${TIFF_LIBRARIES} )
ENDIF()
IF( NOT IMAGEMAGICK_WITH_WINGDI32 )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/clipboard.c" "${CMAKE_CURRENT_SOURCE_DIR}/../coders/emf.c" )
ENDIF( NOT IMAGEMAGICK_WITH_WINGDI32 )
IF( NOT IMAGEMAGICK_WITH_WMF )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/wmf.c" )
ENDIF( NOT IMAGEMAGICK_WITH_WMF )
IF( NOT IMAGEMAGICK_WITH_X11 )
	LIST( REMOVE_ITEM CODERS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/../coders/x.c" "${CMAKE_CURRENT_SOURCE_DIR}/../coders/xwd.c" )
ENDIF( NOT IMAGEMAGICK_WITH_X11 )

